---
import SeoLayout from "../layouts/SeoLayout.astro";
import Hero from "../components/sections/Hero.astro";
import Problems from "../components/sections/Problems.astro";
import HowItWorks from "../components/sections/HowItWorks.astro";
import Benefits from "../components/sections/Benefits.astro";
import CTA from "../components/sections/CTA.astro";
import FadeIn from "../components/ui/FadeIn.astro";
import Breadcrumbs from "../components/ui/Breadcrumbs.astro";

import { 
  getCityData, 
  generateLocalBusinessSchema,
  generateBreadcrumbSchema 
} from "../data/cities";

const cityData = getCityData("santiago");
if (!cityData) {
  return Astro.redirect("/404");
}

const pageUrl = `https://menupro.cl/menu-digital-restaurantes-${cityData.slug}`;

// Schema.org para SEO local
const schemas = {
  "@context": "https://schema.org",
  "@graph": [
    generateLocalBusinessSchema(cityData),
    generateBreadcrumbSchema(cityData, pageUrl),
    {
      "@type": "WebPage",
      "name": `Men√∫ Digital para Restaurantes en ${cityData.name}`,
      "description": cityData.description,
      "url": pageUrl
    }
  ]
};
---

<SeoLayout
  title={`Men√∫ Digital para Restaurantes en ${cityData.name} | MenuPro`}
  description={cityData.description}
  canonical={pageUrl}
  keywords={cityData.keywords}
  city={cityData.name}
  schema={schemas}
  ogType="website"
  ogImage={cityData.ogImage}
>
  <Breadcrumbs items={[
    { label: "Inicio", href: "/" },
    { label: "Men√∫ Digital", href: "/menu-digital-restaurantes" },
    { label: cityData.name }
  ]} />
  
  <Hero
    title={`Men√∫ Digital para Restaurantes en ${cityData.name}`}
    subtitle="Moderniza tu restaurante en la capital con una carta digital profesional. Actualiza precios en tiempo real sin complicaciones."
  />

  <!-- Secci√≥n Local Contextual -->
  <section class="py-16 px-6 max-w-5xl mx-auto">
    <FadeIn>
      <div class="bg-[var(--color-bg-soft)] rounded-3xl p-8 md:p-12 border border-default">
        <h2 class="text-2xl md:text-3xl font-semibold mb-6 text-center">
          MenuPro para restaurantes en {cityData.name}
        </h2>
        
        <div class="prose prose-lg dark:prose-invert max-w-none">
          <p class="text-muted text-center mb-8">
            {cityData.localContext}
          </p>

          <div class="grid md:grid-cols-2 gap-6 mt-8">
            <div class="bg-white dark:bg-neutral-900 rounded-2xl p-6 shadow-sm">
              <h3 class="text-lg font-semibold mb-3 flex items-center gap-2">
                <span class="text-2xl">üçΩÔ∏è</span>
                Para todo tipo de local
              </h3>
              <p class="text-sm text-muted">
                Desde restaurantes de alta cocina en Las Condes hasta picadas tradicionales 
                en Santiago Centro. MenuPro se adapta a tu negocio sin importar el tama√±o.
              </p>
            </div>

            <div class="bg-white dark:bg-neutral-900 rounded-2xl p-6 shadow-sm">
              <h3 class="text-lg font-semibold mb-3 flex items-center gap-2">
                <span class="text-2xl">üì±</span>
                Actualizaci√≥n instant√°nea
              </h3>
              <p class="text-sm text-muted">
                Cambia precios, agrega platos del d√≠a o actualiza disponibilidad 
                desde cualquier lugar de la ciudad. Todo en tiempo real.
              </p>
            </div>

            <div class="bg-white dark:bg-neutral-900 rounded-2xl p-6 shadow-sm">
              <h3 class="text-lg font-semibold mb-3 flex items-center gap-2">
                <span class="text-2xl">üí∞</span>
                Sin comisiones ocultas
              </h3>
              <p class="text-sm text-muted">
                Pago mensual fijo y transparente. Sin comisiones por pedido, 
                sin sorpresas. Ideal para el ritmo de Santiago.
              </p>
            </div>

            <div class="bg-white dark:bg-neutral-900 rounded-2xl p-6 shadow-sm">
              <h3 class="text-lg font-semibold mb-3 flex items-center gap-2">
                <span class="text-2xl">üöÄ</span>
                Implementaci√≥n r√°pida
              </h3>
              <p class="text-sm text-muted">
                Tu men√∫ digital funcionando en minutos. Sin instalaciones 
                complejas, sin capacitaciones largas. Simple y directo.
              </p>
            </div>
          </div>

          {cityData.neighborhoods && cityData.neighborhoods.length > 0 && (
            <div class="mt-8 text-center">
              <p class="text-sm text-muted">
                <strong>Atendemos toda la Regi√≥n Metropolitana:</strong> {cityData.neighborhoods.join(", ")}, y m√°s
              </p>
            </div>
          )}
        </div>
      </div>
    </FadeIn>
  </section>

  <Problems />
  <HowItWorks />
  <Benefits city={cityData.name} />
  <CTA city={cityData.name} />
</SeoLayout>
